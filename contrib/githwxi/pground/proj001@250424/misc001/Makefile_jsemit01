########################################################################
########################################################################
# Makefile for misc001
########################################################################
########################################################################
CAT=cat
BUN=bun
ECHO=echo
NODE=node
PRINTF=printf
########################################################################
########################################################################
all:: pstrm000
########################################################################
########################################################################
testall:: \
pstrm000; $(NODE) $<_out.js
########################################################################
########################################################################
clean:: ; rm -f *~
cleanall:: ; rm -f *~
cleanall:: ; rm -f pstrm000_out.js
cleanall:: ; rm -f pstrm000_out?.js
########################################################################
########################################################################
XATSHOME=./../../../../../../XATSHOME
########################################################################
#
XATS2JS=\
$(XATSHOME)/xassets/JS/xats2js
XATS2JS_JSEMIT01=\
$(XATS2JS)/xats2js_jsemit01_dats_out.js
#
########################################################################
########################################################################
pstrm000:: ; \
$(PRINTF) "// %s\n" "`date`" > $@_out.js
pstrm000:: ; \
$(CAT) $(XATS2JS)/runtime/xats2js_js1emit.js >> $@_out.js
pstrm000:: ; \
$(CAT) $(XATS2JS)/runtime/xats2js_prelude.js >> $@_out.js
pstrm000:: pstrm000.dats; \
$(NODE) --stack-size=8192 $(XATS2JS_JSEMIT01) $< >> $@_out.js
########################################################################
pstrm000_out1:: ; \
npx google-closure-compiler -W QUIET \
  --compilation_level SIMPLE --js=pstrm000_out.js --js_output_file=pstrm000_out1.js
pstrm000_out2:: ; \
npx google-closure-compiler -W QUIET \
  --compilation_level ADVANCED --js=pstrm000_out.js --js_output_file=pstrm000_out2.js
########################################################################
########################################################################
##################### end of [Makefile_jsemit01] #######################
